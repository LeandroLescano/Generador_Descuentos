(this["webpackJsonpyour-app"]=this["webpackJsonpyour-app"]||[]).push([[0],{104:function(e,t,a){},108:function(e,t,a){},111:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(23),r=a.n(l),o=(a(72),a(73),a(74),a(75),a(9)),c=a(10),i=a(19),u=a(13),d=a(18),m=a(3),g=a(25),f=a(24),h=(a(52),a(15)),p=a(36),v=a.n(p),b=a(32),E=a.n(b),N=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={typeFile:"",nameNovedades:"",nameAusencias:"",listOficinas:[],fileNovedades:null,fileAusencias:null,checkAus:!1,checkNov:!1,uploadValue:0,modal1:!1,modal2:!1,modal3:!1,modal4:!1,descuentos:[{nombre:"",numero:null,agentesAus:[],agentesNov:[]}]},a.recargar=function(){window.location.reload()},a.scrollToTop=function(){return window.scrollTo(0,0)},a.handleClick=function(e){(a.setState({typeFile:e.target.value}),"Novedades"===e.target.value)?document.getElementById("fileNovedades").click():document.getElementById("fileAusencias").click()},a.handleChange=function(e){var t=e.target.value.substr(12);e.target.files.length>0&&("Novedades"===a.state.typeFile?a.setState({nameNovedades:t,fileNovedades:e.target.files[0]},(function(){var e=!1;null!==a.state.fileNovedades&&"application/vnd.ms-excel"!==a.state.fileNovedades.type?(a.toggleModal(1)(),a.setState({checkNov:e})):a.papaParsePromiseNov(a.state.fileNovedades).then((function(t){t?e=!0:a.toggleModal(3)(),a.setState({checkNov:e})}))})):a.setState({nameAusencias:t,fileAusencias:e.target.files[0]},(function(){var e=!1;null!==a.state.fileAusencias&&"application/vnd.ms-excel"!==a.state.fileAusencias.type?(a.toggleModal(1)(),a.setState({checkAus:e})):a.papaParsePromiseAus(a.state.fileAusencias).then((function(t){t?e=!0:a.toggleModal(2)(),a.setState({checkAus:e})}))})))},a.leerArchivoA=function(e,t){(new FileReader).readAsDataURL(e);var n=[],s=JSON.parse(JSON.stringify(a.state.descuentos)),l=[20,21,22,28,32,42,43,45,46,47,48,49,51,53,55,60,64,100,117,122,133,150,203,206,245];E.a.parse(e,{complete:function(e){for(var t=e.data,a=0,r=0,o=0,c=0,i=0,u=0;"Observaciones"!==t[0][u]&&u<t[0].length;)u++;var d=u,m=t[0][d+3];s[0]={nombre:m.substring(m.indexOf("- ")+8),numero:m.substring(7,10),agentesAus:[],agentesNov:[]};for(var g=t[c][d+1];c<t.length-1;){n.includes(t[c][d+3].substring(7,10))||n.push(t[c][d+3].substring(7,10));var f=null,h=[];for(a=0,r=0,o=0,i+=1,g=t[c][d+1];g===t[c][d+1];){var p=t[c][d+10],v=p.substring(0,p.indexOf(" -"));if(l.includes(parseInt(v))&&(h.push({codigo:v,nombre:p.substring(p.indexOf("- ")+2),fechai:t[c][d+6],fechaf:t[c][d+7],dias:parseInt(t[c][d+8],10),descripcion:t[c][d+11]}),"49"===v?r+=parseInt(t[c][d+8],10):"51"===v?o+=parseInt(t[c][d+8],10):a+=parseInt(t[c][d+8],10),f=JSON.parse(JSON.stringify({key:i,default:"0",legajo:g.substring(3,g.indexOf(" -")),oficina:t[c][d+3].substring(7,10),nombre:t[c][d+2].replace("\ufffd","\xd1"),diasdesc:a.toString(),diasexenfer:r.toString(),diasexenfamil:o.toString(),ausencias:h}))),!(c+1<t.length)){c++;break}c++}null!==f&&s[0].agentesAus.push(f)}console.log(n)}},a.setState({descuentos:s,listOficinas:n},(function(){a.state.checkNov?a.leerArchivoN(a.state.fileNovedades,"N",s):a.props.onUpload(a.state.descuentos)})))},a.leerArchivoN=function(e,t,n){var s;(new FileReader).readAsDataURL(e),s=null!=n?Object.assign({},n):[];var l=[1,2,3,4];E.a.parse(e,{complete:function(e){var t=e.data;console.log(t);var a=-1,r=0,o=0,c=t[0][6];s[0]=null!=n?{nombre:n[0].nombre,numero:n[0].numero,agentesAus:n[0].agentesAus,agentesNov:[]}:{nombre:"",numero:c.substring(c.indexOf("Oficina")+8,c.indexOf("Oficina")+11),agentesAus:[],agentesNov:[]};for(var i=t[r][11];r<t.length-1;){var u=null,d={hora:0,min:0},m=[];for(a=-1,o+=1,i=t[r][16].substring(3,8);i===t[r][16].substring(3,8);){var g=t[r][20],f=g.substring(0,g.indexOf(" -"));if(l.includes(parseInt(f))){if(m.push({nombre:g.substring(g.indexOf("- ")+2),valor:t[r][23],dias:parseInt(t[r][18],10)}),"4"===f)a++;else{var h=parseInt(t[r][23].substring(0,2)),p=parseInt(t[r][23].substring(3,5));d.hora+=h,d.min+p>59?(d.hora++,d.min+=p-60):d.min+=p}var v=d.hora;v<=0?d.min>15&&d.min<=30?v+=.5:d.min>30&&(v+=1):d.min>0&&d.min<=30?v+=.5:d.min>30&&(v+=1),v=v.toString().replace(",",".");var b=0;a>=1&&(b=a),(b>0||v>0)&&(u=JSON.parse(JSON.stringify({key:o,default:"0",legajo:i,nombre:t[r][16].substring(11).replace("\ufffd","\xd1"),diasdesc:b.toString(),horasdesc:v.toString(),novedades:m})))}if(!(r+1<t.length-1)){r++;break}r++}if(null!==u){if(s[0].agentesAus.length>0){var E=s[0].agentesAus.findIndex((function(e){return e.legajo===u.legajo}));-1!==E&&u.diasdesc>0?s[0].agentesAus[E].diasdesc=parseInt(s[0].agentesAus[E].diasdesc)+parseInt(u.diasdesc):u.diasdesc>0&&(s[0].agentesAus.push(u),s[0].agentesAus.sort((function(e,t){return e.legajo-t.legajo})))}s[0].agentesNov.push(u)}}}},a.setState({descuentos:s},(function(){a.props.onUpload(a.state.descuentos)})))},a.subirArchivo=function(e){v.a.storage().ref("/Archivos/".concat(e.name)).put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;a.setState({uploadValue:t})}),(function(e){console.log(e.message)}),(function(){a.setState({uploadValue:100})}))},a.papaParsePromiseAus=function(e){return new Promise((function(t,a){E.a.parse(e,{step:function(e,a){for(var n=e.data,s=0;s<n.length;s++)"Dias Corridos"===n[s]&&(t(!0),a.abort());t(!1)}})}))},a.papaParsePromiseNov=function(e){return new Promise((function(t,a){E.a.parse(e,{step:function(e,a){for(var n=e.data,s=0;s<n.length;s++)"Valor"===n[s]&&t(!0);t(!1)}})}))},a.generarDescuentos=function(){a.state.checkAus?a.leerArchivoA(a.state.fileAusencias,"A"):a.state.checkNov&&a.leerArchivoN(a.state.fileNovedades,"N")},a.toggleModal=function(e){return function(){var t="modal"+e;a.setState(Object(h.a)({},t,!a.state[t]))}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=null===this.state.fileAusencias?"btn-elegant":this.state.checkAus?"btn-success":"btn-danger",t=null===this.state.fileNovedades?"btn-elegant":this.state.checkNov?"btn-success":"btn-danger";return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mt-3 mb-5"},s.a.createElement(m.j,null,s.a.createElement(m.y,null,s.a.createElement(m.e,{md:"10",className:"mx-auto float-none white z-depth-1 py-2 px-2"},s.a.createElement(m.d,{className:"text-center"},s.a.createElement("h2",{className:"h2-responsive mb-4"},s.a.createElement("strong",{className:"font-weight-bold"},"Subir archivos misma oficina (.csv)")),s.a.createElement(m.y,null),s.a.createElement(m.y,{className:"d-flex flex-row justify-content-center row"},s.a.createElement("button",{className:"btn Ripple-parent ".concat(t),onClick:this.handleClick,value:"Novedades"},"Novedades"),s.a.createElement("input",{id:"fileNovedades",type:"file",hidden:!0,onChange:this.handleChange}),s.a.createElement("button",{className:"btn Ripple-parent ".concat(e),onClick:this.handleClick,value:"Ausencias"},"Ausencias"),s.a.createElement("input",{id:"fileAusencias",type:"file",hidden:!0,onChange:this.handleChange})),s.a.createElement(m.y,{className:"d-flex flex-row justify-content-center row"},s.a.createElement("p",{className:"textFile"},this.state.nameNovedades),s.a.createElement("p",{className:"textFile"},this.state.nameAusencias)),s.a.createElement("button",{className:"btn Ripple-parent btn-success top20",onClick:this.generarDescuentos},"Generar"))))),s.a.createElement(m.g,null,s.a.createElement(m.n,{isOpen:this.state.modal1,toggle:this.toggleModal(1)},s.a.createElement(m.q,{toggle:this.toggleModal(1)},"Ha ocurrido un problema"),s.a.createElement(m.o,null,"El archivo elegido no corresponde a un",s.a.createElement("strong",null," archivo .CSV"),", por favor intente nuevamente."),s.a.createElement(m.p,null,s.a.createElement(m.c,{color:"indigo",onClick:this.toggleModal(1)},"Entendido"))),s.a.createElement(m.n,{isOpen:this.state.modal2,toggle:this.toggleModal(2)},s.a.createElement(m.q,{toggle:this.toggleModal(2)},"Ha ocurrido un problema"),s.a.createElement(m.o,null,"El archivo de ",s.a.createElement("strong",null,"ausencias")," seleccionado no es v\xe1lido, intente con otro archivo. ",s.a.createElement("br",null)," ",s.a.createElement("br",null),"Recuerde que el mismo debe ser descargado de: ",s.a.createElement("br",null),"'Ausencias por legajo completo'.",s.a.createElement("br",null)," ",s.a.createElement("br",null),"En caso de que el error persista, por favor comun\xedquese con el administrador del sistema."),s.a.createElement(m.p,null,s.a.createElement(m.c,{color:"indigo",onClick:this.toggleModal(2)},"Entendido"))),s.a.createElement(m.n,{isOpen:this.state.modal3,toggle:this.toggleModal(3)},s.a.createElement(m.q,{toggle:this.toggleModal(3)},"Ha ocurrido un problema"),s.a.createElement(m.o,null,"El archivo de ",s.a.createElement("strong",null,"novedades")," seleccionado no es v\xe1lido, intente nuevamente.",s.a.createElement("br",null),s.a.createElement("br",null),"En caso de que el error persista, por favor comun\xedquese con el administrador del sistema."),s.a.createElement(m.p,null,s.a.createElement(m.c,{color:"indigo",onClick:this.toggleModal(3)},"Entendido"))),s.a.createElement(m.n,{isOpen:this.state.modal4,toggle:this.toggleModal(4)},s.a.createElement(m.q,{toggle:this.toggleModal(4)},"Ha ocurrido un problema"),s.a.createElement(m.o,null,"Ambos archivos seleccionados no son v\xe1lidos, intente nuevamente.",s.a.createElement("br",null),s.a.createElement("br",null),"En caso de que el error persista, por favor comun\xedquese con el administrador del sistema."),s.a.createElement(m.p,null,s.a.createElement(m.c,{color:"indigo",onClick:this.toggleModal(4)},"Entendido"))))))}}]),t}(s.a.Component),A=a(14),x=a(34);a(54),a(104);var y=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.d,{className:"text-center"},s.a.createElement("div",{className:"col-md-12 centrar"},s.a.createElement("svg",{className:"spinner",width:"65px",height:"65px",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("circle",{className:"circle",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})),s.a.createElement("h3",{className:"top20"},"Generando descuentos..."))))},j=a(28),k=a(115),w=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={showToast:!1,modal1:!1,agentesAusMesAnterior:[{ausencias:[],default:0,diasdesc:null,diasexenfamil:null,diasexenfer:null,key:null,legajo:"",nombre:""}],descuentos:[{nombre:"",numero:null,agentesAus:[],agentesNov:[]}],loaded:!1,valuesMesAnterior:[]},a.handleChangeNew=function(e,t){"diasdesc"===t.target.name?a.setState({valuesMesAnterior:Object(A.a)({},a.state.valuesMesAnterior,Object(h.a)({},e,{diasdesc:t.target.value}))}):"diasexenfer"===t.target.name?a.setState({valuesMesAnterior:Object(A.a)({},a.state.valuesMesAnterior,Object(h.a)({},e,{diasexenfer:t.target.value}))}):a.setState({valuesMesAnterior:Object(A.a)({},a.state.valuesMesAnterior,Object(h.a)({},e,{diasexenfamil:t.target.value}))})},a.handleChange=function(e,t){var n=a.state.valuesMesAnterior;void 0===n[e]?a.handleChangeNew(e,t):("diasdesc"===t.target.name?n[e].diasdesc=t.target.value:"diasexenfer"===t.target.name?n[e].diasexenfer=t.target.value:n[e].diasexenfamil=t.target.value,a.setState({valuesMesAnterior:n}))},a.guardarCambios=function(){var e=Object.assign({},a.state.descuentos);console.log(a.state.valuesMesAnterior);var t=function(t){var n=a.state.descuentos[0].agentesAus.findIndex((function(e){return e.legajo===t}));console.log(a.state.valuesMesAnterior[t].diasdesc),console.log(e[0].agentesAus[n].diasdesc),console.log(e[0].agentesAus[n].diasexenfer),console.log(e[0].agentesAus[n].diasexenfamil),a.state.valuesMesAnterior[t].diasdesc!==e[0].agentesAus[n].diasdesc&&(e[0].agentesAus[n].diasdesc=a.state.valuesMesAnterior[t].diasdesc),a.state.valuesMesAnterior[t].diasexenfer!==e[0].agentesAus[n].diasexenfer&&(e[0].agentesAus[n].diasexenfer=a.state.valuesMesAnterior[t].diasexenfer),a.state.valuesMesAnterior[t].diasexenfamil!==e[0].agentesAus[n].diasexenfamil&&(e[0].agentesAus[n].diasexenfamil=a.state.valuesMesAnterior[t].diasexenfamil)};for(var n in a.state.valuesMesAnterior)t(n);a.setState({descuentos:e},(function(){a.toggleModal(1)}))},a.componentDidMount=function(){setTimeout(function(){this.checkOmisionesF(),this.setState({descuentos:this.props.desc,loaded:!0})}.bind(Object(x.a)(a)),2e3)},a.checkOmisionesF=function(){var e=new Date,t=e.getMonth();if(null!=a.props.desc[0].agentesAus)var n=a.props.desc[0].agentesAus.filter((function(e){return null!=e.ausencias})).filter((function(a){return a.ausencias.some((function(a){return parseInt(a.fechai.substring(4,5))<t||parseInt(a.fechai.substring(6,10)<e.getFullYear())}))}));a.setState({agentesAusMesAnterior:n}),a.props.desc[0].agentesNov.filter((function(e){return e.diasdesc>0})).length>0&&a.props.desc[0].agentesAus.length>0&&a.toggleToast()},a.toggleModal=function(e){return function(){var t="modal"+e;a.setState((function(e){return Object(h.a)({},t,!e[t])}))}},a.toggleToast=function(){a.setState((function(e){return{showToast:!e.showToast}}))},a.offToast=function(){a.setState({showToast:!1})},a.recargar=function(){window.location.reload()},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t={columns:[{label:"Legajo",field:"id"},{label:"Apellido y Nombre",field:"heading0"},{label:"D\xedas a descuento",field:"heading1"},{label:"D\xedas exceso enfermedad",field:"heading2"},{label:"D\xedas exceso familiar enf.",field:"heading3"}],columnsN:[{label:"Legajo",field:"id"},{label:"Apellido y Nombre",field:"heading0"},{label:"Horas a descuento",field:"heading1"},{label:"D\xedas a descuento",field:"heading2"}]};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mt-3 mb-5"},s.a.createElement(m.j,null,s.a.createElement(m.y,null,s.a.createElement(m.e,{md:"10",className:"mx-auto float-none white z-depth-1 py-2 px-2"},!this.state.loaded&&s.a.createElement(y,null),this.state.loaded&&s.a.createElement(m.d,{className:"text-center"},s.a.createElement("span",{className:"arrowBack",onClick:this.recargar},s.a.createElement("i",{className:"material-icons"},"arrow_back_ios"),s.a.createElement("p",{style:{float:"right"}},"Volver")),s.a.createElement("h2",{className:"h2-responsive mb-4"},s.a.createElement("strong",{className:"font-weight-bold"},"Resultados")),s.a.createElement(m.y,null),this.state.descuentos[0].agentesAus.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-flex"},s.a.createElement("h3",{className:"h3-responsive text-left mb-2"},s.a.createElement("strong",{className:"font-weight-bold"}," ","Ausencias ",this.state.descuentos[0].numero)),this.state.agentesAusMesAnterior.length>0&&s.a.createElement(m.c,{disabled:!0,className:"btn-elegant ml-auto",onClick:this.toggleModal(1)},"Ausencias del mes anterior")),s.a.createElement(m.z,{responsiveSm:!0},s.a.createElement(m.B,{columns:t.columns,color:"indigo",textWhite:!0}),s.a.createElement(m.D,null,this.state.descuentos[0].agentesAus.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",{className:"text-center"},e.legajo),s.a.createElement("td",null,e.nombre),s.a.createElement("td",{className:"text-center"},e.diasdesc),s.a.createElement("td",{className:"text-center"},e.diasexenfer),s.a.createElement("td",{className:"text-center"},e.diasexenfamil))})))),this.state.descuentos[0].agentesAus.filter((function(e){return e.diasdesc>0})).length>0&&s.a.createElement(j.CSVLink,{data:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasdesc>0})).slice(1),headers:[{label:this.state.descuentos[0].agentesAus[0].legajo,key:"legajo"},{label:this.state.descuentos[0].agentesAus[0].default,key:"default"},{label:this.state.descuentos[0].agentesAus[0].diasdesc,key:"diasdesc"}],enclosingCharacter:"",filename:"Descuento ausencias "+this.state.descuentos[0].numero+".csv",target:"_blank"},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos ausencias (.csv)")),this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0})).length>0&&s.a.createElement(j.CSVLink,{data:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0})).slice(1),headers:[{label:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0})).legajo,key:"legajo"},{label:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0})).default,key:"default"},{label:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0})).diasexenfer,key:"diasexenfer"}],enclosingCharacter:"",filename:"Descuento dias exceso enfermedad "+this.state.descuentos[0].numero+".csv",target:"_blank"},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos exceso enfermedad (.csv)")),this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0})).length>0&&s.a.createElement(j.CSVLink,{data:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0})).slice(1),headers:[{label:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0}))[0].legajo,key:"legajo"},{label:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0}))[0].default,key:"default"},{label:this.state.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0}))[0].diasexenfamil,key:"diasexenfamil"}],enclosingCharacter:"",filename:"Descuento dias exceso familiar enf. "+this.state.descuentos[0].numero+".csv",target:"_blank"},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos exceso familiar enf. (.csv)"))),this.state.descuentos[0].agentesNov.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"h3-responsive text-left mb-2 mt-3"},s.a.createElement("strong",{className:"font-weight-bold"}," ","Novedades ",this.state.descuentos[0].numero)),s.a.createElement(m.z,{responsiveSm:!0},s.a.createElement(m.B,{columns:t.columnsN,color:"indigo",textWhite:!0}),s.a.createElement(m.D,null,this.state.descuentos[0].agentesNov.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",{className:"text-center"},e.legajo),s.a.createElement("td",null,e.nombre),s.a.createElement("td",{className:"text-center"},e.horasdesc),s.a.createElement("td",{className:"text-center"},e.diasdesc))})))),this.state.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5})).length>0&&s.a.createElement(j.CSVLink,{data:this.state.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5})).slice(1),headers:[{label:this.state.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5}))[0].legajo,key:"legajo"},{label:this.state.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5}))[0].default,key:"default"},{label:this.state.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5}))[0].horasdesc,key:"horasdesc"}],enclosingCharacter:"",filename:"Descuento horas novedades "+this.state.descuentos[0].numero+".csv",target:"_blank"},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos horas novedades (.csv)")),this.state.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1})).length>0&&this.state.descuentos[0].agentesAus.length<=0&&s.a.createElement(j.CSVLink,{data:this.state.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1})).slice(1),headers:[{label:this.state.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1}))[0].legajo,key:"legajo"},{label:this.state.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1}))[0].default,key:"default"},{label:this.state.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1}))[0].diasdesc,key:"diasdesc"}],enclosingCharacter:"",filename:"Descuento dias novedades "+this.state.descuentos[0].numero+".csv",target:"_blank"},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos d\xedas novedades (.csv)"))))))),s.a.createElement(m.g,null),s.a.createElement(m.n,{size:"lg",isOpen:this.state.modal1,toggle:this.toggleModal(1)},s.a.createElement(m.q,{toggle:this.toggleModal(1)},"\xa1Cuidado! Hay agentes que arrastran ausencias del mes pasado"),s.a.createElement(m.o,null,s.a.createElement(m.z,{className:"text-center",responsiveSm:!0},s.a.createElement(m.B,{columns:t.columns,color:"indigo",textWhite:!0}),s.a.createElement(m.A,null,this.state.agentesAusMesAnterior.map((function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",{className:"text-center"},t.legajo),s.a.createElement("td",null,t.nombre),s.a.createElement("td",{className:"text-center"},s.a.createElement(m.m,{className:"text-center",name:"diasdesc",onChange:e.handleChange.bind(e,t.legajo),valueDefault:t.diasdesc})),s.a.createElement("td",{className:"text-center"},s.a.createElement(m.m,{className:"text-center",name:"diasexenfer",onChange:e.handleChange.bind(e,t.legajo),valueDefault:t.diasexenfer})),s.a.createElement("td",{className:"text-center"},s.a.createElement(m.m,{className:"text-center",name:"diasexenfamil",onChange:e.handleChange.bind(e,t.legajo),valueDefault:t.diasexenfamil})))}))))),s.a.createElement(m.p,null,s.a.createElement(m.c,{color:"danger",onClick:this.toggleModal(1)},"Cancelar"),s.a.createElement(m.c,{color:"success",onClick:function(){e.guardarCambios()}},"Guardar"))),this.state.showToast&&s.a.createElement(k.a,{show:this.state.showToast,onClose:this.offToast,delay:1e4,autohide:!0,className:"toast-place"},s.a.createElement(k.a.Header,null,s.a.createElement(m.k,{icon:"exclamation-triangle",className:"img-toast"}),s.a.createElement("strong",{className:"mr-auto"},"Omisiones de fichada")),s.a.createElement(k.a.Body,null,"Los descuentos por omisiones de fichada fueron sumados en el archivo de ausencias."))))}}]),t}(s.a.Component),O=a(45),C=(a(108),a(29)),M=a.n(C),S=a(64);var D=function(e){var t=this,a=e.desc,l=Object(n.useState)(!1),r=Object(O.a)(l,2),o=r[0],c=r[1],i=Object(n.useState)({showToast:!1,agentesAusMesAnterior:[{ausencias:[],default:0,diasdesc:null,diasexenfamil:null,diasexenfer:null,key:null,legajo:"",nombre:""}],descuentos:a,loaded:!1,valuesMesAnterior:[]}),u=Object(O.a)(i,2),d=u[0],g=u[1],f=function(e,t){var a=d.valuesMesAnterior;void 0===a[e]?function(e,t){"diasdesc"===t.target.name?g((function(a){return Object(A.a)({},a,{valuesMesAnterior:Object(A.a)({},a.valuesMesAnterior,Object(h.a)({},e,{diasdesc:t.target.value}))})})):"diasexenfer"===t.target.name?g((function(a){return Object(A.a)({},a,{valuesMesAnterior:Object(A.a)({},a.valuesMesAnterior,Object(h.a)({},e,{diasexenfer:t.target.value}))})})):g((function(a){return Object(A.a)({},a,{valuesMesAnterior:Object(A.a)({},a.valuesMesAnterior,Object(h.a)({},e,{diasexenfamil:t.target.value}))})}))}(e,t):("diasdesc"===t.target.name?a[e].diasdesc=t.target.value:"diasexenfer"===t.target.name?a[e].diasexenfer=t.target.value:a[e].diasexenfamil=t.target.value,g((function(e){return Object(A.a)({},e,{valuesMesAnterior:a})})))};Object(n.useEffect)((function(){setTimeout((function(){g({showToast:!1,agentesAusMesAnterior:[{ausencias:[],default:0,diasdesc:null,diasexenfamil:null,diasexenfer:null,key:null,legajo:"",nombre:""}],descuentos:e.desc,loaded:!0,valuesMesAnterior:[]}),p()}),2e3)}),[]);var p=function(){console.log("checkOmisionesF");var e=new Date,t=e.getMonth();if(console.log(e),console.log("mesAnterior: "+t),null!=d.descuentos[0].agentesAus)var a=d.descuentos[0].agentesAus.filter((function(e){return null!=e.ausencias})).filter((function(a){return a.ausencias.some((function(a){return parseInt(a.fechai.substring(4,5))<t||parseInt(a.fechaf.substring(4,5))>t||parseInt(a.fechai.substring(6,10)<e.getFullYear())}))}));g((function(e){return Object(A.a)({},e,{agentesAusMesAnterior:a})})),d.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>0})).length>0&&d.descuentos[0].agentesAus.length>0&&b()},v=function(){c(!o)},b=function(){S.a.fire({toast:!0,position:"top",icon:"warning",title:"Las omisiones de fichada fueron automaticamente pasadas al archivo de ausencias",timer:6e3,timerProgressBar:!0})},E={columns:[{label:"Legajo",field:"id"},{label:"Apellido y Nombre",field:"heading0"},{label:"D\xedas a descuento",field:"heading1"},{label:"D\xedas exceso enfermedad",field:"heading2"},{label:"D\xedas exceso familiar enf.",field:"heading3"}],columnsN:[{label:"Legajo",field:"id"},{label:"Apellido y Nombre",field:"heading0"},{label:"Horas a descuento",field:"heading1"},{label:"D\xedas a descuento",field:"heading2"}]};return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"mt-3 mb-5"},s.a.createElement(m.j,null,s.a.createElement(m.y,null,s.a.createElement(m.e,{md:"10",className:"mx-auto float-none white z-depth-1 py-2 px-2"},!d.loaded&&s.a.createElement(y,null),d.loaded&&s.a.createElement(m.d,{className:"text-center"},s.a.createElement("span",{className:"arrowBack",onClick:function(){window.location.reload()}},s.a.createElement("i",{className:"material-icons"},"arrow_back_ios"),s.a.createElement("p",{style:{float:"right"}},"Volver")),s.a.createElement("h2",{className:"h2-responsive mb-4"},s.a.createElement("strong",{className:"font-weight-bold"},"Resultados")),s.a.createElement(m.y,null),d.descuentos[0].agentesAus.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"d-flex"},s.a.createElement("h3",{className:"h3-responsive text-left mb-2"},s.a.createElement("strong",{className:"font-weight-bold"},"Ausencias ",d.descuentos[0].numero)),d.agentesAusMesAnterior.length>0&&s.a.createElement(m.c,{className:"btn-elegant ml-auto",onClick:function(){return v()}},"Ausencias excedentes al mes actual")),s.a.createElement(m.z,{responsiveSm:!0},s.a.createElement(m.B,{columns:E.columns,color:"indigo",textWhite:!0}),s.a.createElement(m.D,null,d.descuentos[0].agentesAus.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",{className:"text-center"},e.legajo),s.a.createElement("td",null,e.nombre),s.a.createElement("td",{className:"text-center"},e.diasdesc),s.a.createElement("td",{className:"text-center"},e.diasexenfer),s.a.createElement("td",{className:"text-center"},e.diasexenfamil))})))),d.descuentos[0].agentesAus.filter((function(e){return e.diasdesc>0})).length>0&&s.a.createElement(M.a,{id:"test",bom:"false",filename:"Descuento ausencias "+d.descuentos[0].numero+".csv",datas:d.descuentos[0].agentesAus.filter((function(e){return e.diasdesc>0})).slice(1),columns:[{id:"legajo",displayName:d.descuentos[0].agentesAus[0].legajo},{id:"default",displayName:d.descuentos[0].agentesAus[0].default},{id:"diasdesc",displayName:d.descuentos[0].agentesAus[0].diasdesc}]},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos ausencias (.csv)")),d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0})).length>0&&s.a.createElement(M.a,{filename:"Descuento dias exceso enfermedad "+d.descuentos[0].numero+".csv",datas:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0})).slice(1),columns:[{id:"legajo",displayName:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0}))[0].legajo},{id:"default",displayName:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0}))[0].default},{id:"diasexenfer",displayName:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfer>0}))[0].diasexenfer}]},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos exceso enfermedad (.csv)")),d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0})).length>0&&s.a.createElement(M.a,{filename:"Descuento dias exceso familiar enf. "+d.descuentos[0].numero+".csv",datas:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0})).slice(1),columns:[{id:"legajo",displayName:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0}))[0].legajo},{id:"default",displayName:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0}))[0].default},{id:"diasexenfamil",displayName:d.descuentos[0].agentesAus.filter((function(e){return e.diasexenfamil>0}))[0].diasexenfamil}]},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos exceso familiar enf. (.csv)"))),d.descuentos[0].agentesNov.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h3",{className:"h3-responsive text-left mb-2 mt-3"},s.a.createElement("strong",{className:"font-weight-bold"}," ","Novedades ",d.descuentos[0].numero)),s.a.createElement(m.z,{responsiveSm:!0},s.a.createElement(m.B,{columns:E.columnsN,color:"indigo",textWhite:!0}),s.a.createElement(m.D,null,d.descuentos[0].agentesNov.map((function(e,t){return s.a.createElement("tr",{key:t},s.a.createElement("td",{className:"text-center"},e.legajo),s.a.createElement("td",null,e.nombre),s.a.createElement("td",{className:"text-center"},e.horasdesc),s.a.createElement("td",{className:"text-center"},e.diasdesc))})))),d.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5})).length>0&&s.a.createElement(M.a,{filename:"Descuento horas novedades "+d.descuentos[0].numero+".csv",datas:d.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5})).slice(1),columns:[{id:"legajo",displayName:d.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5}))[0].legajo},{id:"default",displayName:d.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5}))[0].default},{id:"horasdesc",displayName:d.descuentos[0].agentesNov.filter((function(e){return e.horasdesc>=.5}))[0].horasdesc}]},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos horas novedades (.csv)")),d.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1})).length>0&&d.descuentos[0].agentesAus.length<=0&&s.a.createElement(M.a,{filename:"Descuento dias novedades "+d.descuentos[0].numero+".csv",datas:d.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1})).slice(1),columns:[{id:"legajo",displayName:d.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1}))[0].legajo},{id:"default",displayName:d.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1}))[0].default},{id:"diasdesc",displayName:d.descuentos[0].agentesNov.filter((function(e){return e.diasdesc>=1}))[0].diasdesc}]},s.a.createElement("button",{className:"btn Ripple-parent btn-indigo top20"},"Descargar descuentos d\xedas novedades (.csv)"))))))),s.a.createElement(m.g,null),o&&s.a.createElement(m.n,{size:"lg",isOpen:o,toggle:function(){v()}},s.a.createElement(m.q,{toggle:function(){v()}},"Agentes que poseen ausencias del mes anterior o siguiente"),s.a.createElement(m.o,null,s.a.createElement(m.z,{className:"text-center",responsiveSm:!0},s.a.createElement(m.B,{columns:E.columns,color:"indigo",textWhite:!0}),s.a.createElement(m.A,null,d.agentesAusMesAnterior.length>0&&d.agentesAusMesAnterior.map((function(e,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",{className:"text-center"},e.legajo),s.a.createElement("td",null,e.nombre),s.a.createElement("td",{className:"text-center"},s.a.createElement(m.m,{className:"text-center",name:"diasdesc",onChange:f.bind(t,e.legajo),valueDefault:e.diasdesc})),s.a.createElement("td",{className:"text-center"},s.a.createElement(m.m,{className:"text-center",name:"diasexenfer",onChange:f.bind(t,e.legajo),valueDefault:e.diasexenfer})),s.a.createElement("td",{className:"text-center"},s.a.createElement(m.m,{className:"text-center",name:"diasexenfamil",onChange:f.bind(t,e.legajo),valueDefault:e.diasexenfamil})))}))))),s.a.createElement(m.p,null,s.a.createElement(m.c,{color:"danger",onClick:function(){v()}},"Cancelar"),s.a.createElement(m.c,{color:"success",onClick:function(){!function(){var t=Object.assign({},e.desc),a=function(e){var a=d.descuentos[0].agentesAus.findIndex((function(t){return t.legajo===e}));d.valuesMesAnterior[e].diasdesc!==t[0].agentesAus[a].diasdesc&&void 0!==d.valuesMesAnterior[e].diasdesc&&(t[0].agentesAus[a].diasdesc=d.valuesMesAnterior[e].diasdesc),d.valuesMesAnterior[e].diasexenfer!==t[0].agentesAus[a].diasexenfer&&void 0!==d.valuesMesAnterior[e].diasexenfer&&(t[0].agentesAus[a].diasexenfer=d.valuesMesAnterior[e].diasexenfer),d.valuesMesAnterior[e].diasexenfamil!==t[0].agentesAus[a].diasexenfamil&&void 0!==d.valuesMesAnterior[e].diasexenfamil&&(t[0].agentesAus[a].diasexenfamil=d.valuesMesAnterior[e].diasexenfamil)};for(var n in d.valuesMesAnterior)a(n);g((function(e){return Object(A.a)({},e,{descuentos:t})})),v()}()}},"Guardar"))),d.showToast&&s.a.createElement(k.a,{show:d.showToast,onClose:function(){g((function(e){return Object(A.a)({},e,{showToast:!1})}))},delay:1e4,autohide:!0,className:"toast-place"},s.a.createElement(k.a.Header,null,s.a.createElement(m.k,{icon:"exclamation-triangle",className:"img-toast"}),s.a.createElement("strong",{className:"mr-auto"},"Omisiones de fichada")),s.a.createElement(k.a.Body,null,"Los descuentos por omisiones de fichada fueron sumados en el archivo de ausencias."))))},I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={typeFile:"",nameNovedades:"",nameAusencias:"",fileNovedades:null,fileAusencias:null,descuentos:[{nombre:"",numero:null,agentesAus:[],agentesNov:[]}],resultados:!1,resultadosTest:!1,showHome:!0},a.handleChange=function(e){console.log(e),a.setState({descuentos:e},(function(){a.mostrarResultados()}))},a.mostrarResultados=function(){"/Test"===window.location.href.substring(window.location.href.lastIndexOf("/"))?a.setState({resultadosTest:!0,showHome:!1}):a.setState({resultados:!0,showHome:!1})},a.scrollToTop=function(){return window.scrollTo(0,0)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.h,{color:"indigo darken-3",className:"sectionPage"}),this.state.showHome&&s.a.createElement(N,{agentes:this.state.agente,onUpload:this.handleChange}),this.state.resultados&&s.a.createElement(w,{desc:this.state.descuentos}),this.state.resultadosTest&&s.a.createElement(D,{desc:this.state.descuentos}))}}]),t}(s.a.Component),T=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(f.c,null,s.a.createElement(f.a,{exact:!0,path:"/",component:I}),s.a.createElement(f.a,{exact:!0,path:"/Test",component:I}),s.a.createElement(f.a,{exact:!0,path:"/resultados",component:w}),s.a.createElement(f.a,{render:function(){return s.a.createElement("div",{className:"row mt-5",style:{justifyContent:"center"}},s.a.createElement("div",{className:"col-6 ml-5"},s.a.createElement("div",{className:"jumbotron"},s.a.createElement("h2",{className:"display-4"},"Oops!"),s.a.createElement("p",{className:"lead"},"No pude encontrar la p\xe1gina especificada. Lo siento!"),s.a.createElement("hr",{className:"my-4"}),s.a.createElement("p",null,"Para volver a la pantalla principal haz click aqu\xed debajo"),s.a.createElement("a",{className:"btn btn-primary btn-md",href:"/",role:"button"},"Generador de descuentos"))),s.a.createElement("div",{className:"col-5"},s.a.createElement("img",{className:"img-fluid border rounded mb-0",width:"500px",alt:"DogGuardian",src:"https://i.pinimg.com/originals/32/da/5c/32da5c3314fcc5ebf1a7b7d1548fcb03.jpg"})))}}))}}]),t}(s.a.Component);v.a.initializeApp({apiKey:"AIzaSyDmpS8UwB3aHq4qHuzlXVnSj1knOYY8yig",authDomain:"generador-descuentos.firebaseapp.com",databaseURL:"https://generador-descuentos.firebaseio.com",projectId:"generador-descuentos",storageBucket:"generador-descuentos.appspot.com",messagingSenderId:"91523567902",appId:"1:91523567902:web:9cd9a13edc8b30d609f90f",measurementId:"G-FBTKKQ9H97"});var F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s)))).state={collapseID:"",typeFile:"",nameNovedades:"",nameAusencias:"",fileNovedades:null,fileAusencias:null,uploadValue:0},a.toggleCollapse=function(e){return function(){return a.setState((function(t){return{collapseID:t.collapseID!==e?e:""}}))}},a.closeCollapse=function(e){return function(){window.scrollTo(0,0),a.state.collapseID===e&&a.setState({collapseID:""})}},a.recargar=function(){window.location.reload()},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=s.a.createElement("div",{id:"sidenav-overlay",style:{backgroundColor:"transparent"},onClick:this.toggleCollapse("mainNavbarCollapse")}),t=this.state.collapseID;return s.a.createElement(g.a,null,s.a.createElement("div",{className:"flyout"},s.a.createElement(m.s,{color:"indigo",dark:!0,expand:"md",fixed:"top",scrolling:!0},s.a.createElement(m.t,{href:"/",className:"py-0 font-weight-bold"},s.a.createElement("strong",{className:"align-middle",onClick:this.recargar},"Generador de descuentos")),s.a.createElement(m.v,{onClick:this.toggleCollapse("mainNavbarCollapse")}),s.a.createElement(m.f,{id:"mainNavbarCollapse",isOpen:this.state.collapseID,navbar:!0},s.a.createElement(m.u,{right:!0},s.a.createElement(m.r,null,s.a.createElement("strong",{style:{color:"white"}},"Versi\xf3n Beta 1.0"))))),t&&e,s.a.createElement("main",{style:{marginTop:"4rem"}},s.a.createElement(T,null)),s.a.createElement(m.i,{color:"indigo"},s.a.createElement("div",null,s.a.createElement("p",{className:"footer-copyright mb-2 pb-1 pt-2 text-center"},"\xa9 ",(new Date).getFullYear()," Copyright: Lescano, Leandro Nicolas"," ")))))}}]),t}(n.Component),R=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(s.a.createElement(F,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");R?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):B(e)}))}}()},52:function(e,t,a){},54:function(e,t,a){},67:function(e,t,a){e.exports=a(111)},75:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.9f2fffc0.chunk.js.map